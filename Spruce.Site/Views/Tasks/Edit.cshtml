@model WorkItemSummary

<script type="text/javascript">
	$(document).ready(function () {
		setupEditPage();
	});
</script>

@if (ViewData["Error"] != null)
{
	<div class="errorbox">
		<h1>There was a problem saving the task</h1>
		<p>
			<b>The error TFS returned was:</b><br />
			@ViewData["Error"]
		</p>
	</div>
}
	
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "editform" }))
{
	@(Html.HiddenFor<WorkItemSummary,int>(m => m.Id))

	<h3>@ViewData["PageName"]</h3>
	
	<div id="edit-container">
		<div id="edit-title">
			@(Html.TextBoxFor<WorkItemSummary, string>(i => i.Title, 
														new { tabindex = 1, 
															title = "Enter your title",
															placeholder="Enter your title",
															maxlength=150 }))
		</div>

		<div id="edit-options" class="lightbg">
			<div class="left edit-field">
				<div class="left label">Assigned to:</div>
				<div class="left value">@Html.DropDownBoxFromList("AssignedTo",(List<string>)ViewData["Users"],Model.AssignedTo,2)</div>
			</div>
		
			<div class="left edit-field">
				<div class="left label">State:</div>
				<div class="left value">@Html.DropDownBoxFromList("State", (List<string>)ViewData["States"], Model.State,3)</div>
			</div>

			<div class="left edit-field">
				<div class="left label">Area:</div>
				<div class="left value">@Html.DropDownBoxForAreas("AreaPath", (List<AreaSummary>)ViewData["Areas"], Model.AreaPath,4)</div>
			</div>

			<div class="left edit-field">
				<div class="left label">Iteration:</div>
				<div class="left value">@Html.DropDownBoxForIterations("IterationPath", (List<IterationSummary>)ViewData["Iterations"], Model.IterationPath,5)</div>
			</div>

			@if (Model.Priority != null)
			{
			<div class="left edit-field">
				<div class="left label">Priority:</div>
				<div class="left value">@Html.DropDownBoxFromList("Priority", (List<string>)ViewData["Priorities"], Model.Priority.Value.ToString(),4)</div>
			</div>
			<br style="clear:both"/>
			}
		
			<div class="left edit-field-long">
				<div class="left label">Estimated hours:</div>
				<div class="left value">@(Html.TextBoxFor<WorkItemSummary, double>(w => w.EstimatedHours, new { @class = "twochar-textbox", tabindex = 6, maxlength = 10}))</div>
			</div>

			<div class="left edit-field-long">
				<div class="left label">Remaining hours:</div>
				<div class="left value">@(Html.TextBoxFor<WorkItemSummary, double>(w => w.RemainingHours, new { @class = "twochar-textbox", tabindex = 7, maxlength = 10 }))</div>
			</div>

			<div class="left edit-field-long">
				<div class="left label">Completed hours:</div>
				<div class="left value">@(Html.TextBoxFor<WorkItemSummary, double>(w => w.CompletedHours, new { @class = "twochar-textbox", tabindex = 8, maxlength = 10 }))</div>
			</div>
			<br style="clear:both"/>
		</div>

		<div id="edit-description">
			@(Html.TextAreaFor<WorkItemSummary, string>(i => i.Description, 
														new { tabindex = 9, 
														title = "Enter a brief description. See your project template for guidance", 
														placeholder = "Enter a brief description. See your project template for guidance" }))
		</div>

		<div id="edit-buttons">
			<input type="submit" value="Save" tabindex="10" />
			<input type="button" value="Cancel" onclick="history.go(-1);" tabindex="11"  />
		</div>
	</div>
}